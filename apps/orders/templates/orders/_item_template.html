<template id="item-template">
  <div class="card item-card border-0 shadow-sm rounded-4" data-index="">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-start mb-2">
        <div class="fw-semibold">
          Позиція <span class="pos-index">1</span>
          <img src="/static/media/load.gif" alt="load" class="load_gif" style="display:none;" />
        </div>
        <button type="button" class="btn btn-sm btn-outline-danger remove-row" aria-label="Видалити позицію"><i class="bi bi-x-lg"></i></button>
      </div>

      <div class="row g-3">
        <!-- Система + колір системи -->
        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Система</strong></label>
          <select name="system_sheet" class="form-select system-sheet">
            <!-- опції підставляються з JS (вкладки з Google Sheets) -->
          </select>

          <br />
          <label class="form-label"><strong>Колір системи</strong></label>
          <select name="table_section" class="form-select table-section" disabled>
            <option value="">Спочатку оберіть систему…</option>
          </select>
        </div>

        <!-- Тканина + габаритна висота -->
        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Тканина</strong></label>
          <select name="fabric_name" class="form-select fabric" disabled>
            <option value="">Спочатку оберіть колір системи…</option>
          </select>
          <br />
          <div class="mb-2">
            <label class="form-label"><strong>Колір тканини</strong></label>
            <select name="fabric_color" class="form-select fabric-color">
              <option value="" selected disabled>— Оберіть колір —</option>
            </select>
          </div>
        </div>

        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Габаритна висота, мм</strong></label>
          <input type="number" min="0" name="height_gabarit_mm" class="form-control h-mm" placeholder="введіть мм" disabled />
          <br />
          <label class="form-label"><strong>Ширина, мм</strong></label>
          <div class="input-group">
            <input type="number" min="0" name="width_fabric_mm" class="form-control w-mm" placeholder="введіть мм" disabled />
            <div class="input-group-text">
              <input class="form-check-input mt-0 gabarit-width-flag" type="checkbox" name="gabarit_width_flag" aria-label="Габаритна ширина" disabled />
            </div>
          </div>
          <div class="form-text">Поставте галочку, якщо це габаритна ширина</div>
        </div>

        <!-- Сторона керування + додаткові опції + ціна -->
        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Кількість виробів</strong></label>
          <input type="number" name="quantity" class="form-control qty" min="1" step="1" value="1" disabled>
          <br />
          <label class="form-label"><strong>Сторона керування</strong></label>
          <select name="control_side" class="form-select control-side">
            <option value="">— Не вказано —</option>
            <option value="left">Ліва</option>
            <option value="right">Права</option>
            <option value="none">Без керування / пружина</option>
          </select>

          <div class="mt-2">
            <div class="form-check">
              <input class="form-check-input bottom-fixation" type="checkbox" name="bottom_fixation" id="bf_" />
              <label class="form-check-label" for="bf_">Нижня фіксація</label>
            </div>
            <div class="form-check">
              <input class="form-check-input pvc-plank" type="checkbox" name="pvc_plank" id="pvc_" />
              <label class="form-check-label" for="pvc_">Планка ПВХ зі скотчем</label>
            </div>
            <div class="form-check">
              <input class="form-check-input magnets" type="checkbox" name="magnets_fixation" id="mag_" />
              <label class="form-check-label" for="mag_">Фіксація магнітами</label>
            </div>
          </div>

          <br />
          <div class="price-box border rounded-3 p-3">
            <div class="kv">
              <span>База</span><span class="base">0.00</span>
            </div>
            <div class="kv">
              <span>Допис висоти</span><span class="surcharge">0.00</span>
            </div>
            <div class="kv">
              <span>Магніти</span><span class="magnets-price">0.00</span>
            </div>
            <hr class="my-2" />
            <div class="sum">
              <span>Ціна позиції</span>
              <span class="subtotal">0.00</span>
              <img src="/static/media/load.gif" alt="load" class="load_gif" style="display:none;" />
            </div>

            <input type="hidden" name="base_price_eur" class="base-input" />
            <input type="hidden" name="surcharge_height_eur" class="surcharge-input" />
            <input type="hidden" name="magnets_price_eur" class="magnets-input" />
            <input type="hidden" name="subtotal_eur" class="subtotal-input" />
            <input type="hidden" name="roll_height_info" class="roll-info-input" />
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
