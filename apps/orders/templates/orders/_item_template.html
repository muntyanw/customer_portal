<template id="item-template">
  <div class="card item-card border-0 shadow-sm rounded-4" data-index="">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-start mb-2">
        <div class="order-position">
          Позиція <span class="pos-index">1</span>
        </div>
        <div>
          <label class="comment-proportions"></label>
        </div>
        <button type="button" class="btn btn-sm btn-outline-danger remove-row" aria-label="Видалити позицію"><i class="bi bi-x-lg"></i></button>
      </div>

      <div class="row g-3">
        <!-- Система + колір системи -->
        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Система</strong></label>
          <select name="system_sheet" class="form-select system-sheet">
            <!-- опції підставляються з JS (вкладки з Google Sheets) -->
          </select>

          <br />
          <br />
          <br />
          <label class="form-label"><strong>Колір системи</strong></label>
          <select name="table_section" class="form-select table-section" disabled>
            <option value="">Спочатку оберіть систему…</option>
          </select>
        </div>

        <!-- Тканина + габаритна висота -->
        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Тканина</strong></label>
          <select name="fabric_name" class="form-select fabric" disabled>
            <option value="">Спочатку оберіть колір системи…</option>
          </select>
          <br />
          <br />
          <br />
          <div class="mb-2">
            <label class="form-label"><strong>Колір тканини</strong></label>
            <select name="fabric_color_code" class="form-select fabric-color-code">
              <option value="" selected disabled>— Оберіть колір —</option>
            </select>
          </div>
        </div>

        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Габаритна висота, мм</strong></label>
          <input type="number" min="0" name="height_gabarit_mm" class="form-control h-mm" placeholder="введіть мм" disabled />
          <br />
          <label class="form-label"><strong>Ширина, мм</strong></label>
          <input type="number" min="0" name="width_fabric_mm" class="form-control w-mm" placeholder="введіть мм" disabled />
          <div class="form-check mt-2">
            <label class="form-label">Це габаритна ширина</label>
            <input class="form-check-input bottom-fixation gabarit-width-flag" type="checkbox" name="gabarit_width_flag" disabled />
          </div>
        </div>

        <div class="col-12 col-md-3">
          <label class="form-label"><strong>Кількість виробів</strong></label>
          <input type="number" name="quantity" class="form-control qty" min="1" step="1" value="1" disabled />
        </div>

        <div class="row">
          <div class="col-12 col-md-12 op-card-list">

            <div class="form-check d-none op-card magnets-fixation">
              <input class="form-check-input magnets_fixation" type="checkbox" name="magnets_fixation" />
              <label class="form-check-label" for="mag_">Фіксація магнітами (<span class="price">0</span> грн)</label>
            </div>

            <label class="form-label control_side d-none"><strong>Сторона керування</strong></label>
            <select name="control_side" class="form-select control-side d-none">
              <option value="">— Не вказано —</option>
              <option value="left">Ліва</option>
              <option value="right">Права</option>
              <option value="none">Без керування / пружина</option>
            </select>

            <div class="mt-2">
              <div class="form-check d-none">
                <input class="form-check-input bottom-fixation" type="checkbox" name="bottom_fixation" id="bf_" />
                <label class="form-check-label" for="bf_">Нижня фіксація</label>
              </div>
              <div class="form-check d-none">
                <input class="form-check-input pvc-plank" type="checkbox" name="pvc_plank" id="pvc_" />
                <label class="form-check-label" for="pvc_">Планка ПВХ зі скотчем</label>
              </div>
            </div>

            <input type="hidden" name="base_price_eur" class="base-input" />
            <input type="hidden" name="surcharge_height_eur" class="surcharge-input" />
            <input type="hidden" name="magnets-fixation-input" class="magnets-fixation-input" />
            <input type="hidden" name="subtotal_eur" class="subtotal-input" />
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-12 col-md-3">
            <div class="price-box border rounded-3 p-3">
              <div class="kv">
                <span>Система</span><span class="base">0.00</span>
              </div>
              <div class="kv">
                <span>Допис висоти</span><span class="surcharge">0.00</span>
              </div>
              <div class="kv magnets-fixation d-none">
                <span>Магніти</span><span class="magnets-fixation-price">0.00</span>
              </div>
              <hr class="my-2" />
              <div class="sum">
                <span>Ціна позиції</span>
                <span class="subtotal-input">0.00</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
